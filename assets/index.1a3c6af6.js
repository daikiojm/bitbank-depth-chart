var q=Object.defineProperty,z=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(e,o,n)=>o in e?q(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,x=(e,o)=>{for(var n in o||(o={}))v.call(o,n)&&w(e,n,o[n]);if(C)for(var n of C(o))L.call(o,n)&&w(e,n,o[n]);return e},y=(e,o)=>z(e,Y(o));var E=(e,o)=>{var n={};for(var s in e)v.call(e,s)&&o.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&C)for(var s of C(e))o.indexOf(s)<0&&L.call(e,s)&&(n[s]=e[s]);return n};import{r as a,c as J,j as t,T as X,i as Q,d as P,a as c,C as K,G as Z,u as b,B as m,A as ee,b as te,I,e as oe,f as d,g as ne,h as re,k as se,l as R,R as g,m as ie,F as ae,H as le,n as ce,L as D,o as de,p as he,q as ue,s as O,t as pe,D as me,v as xe,w as ge,x as fe,y as M,S as B,z as ye,E as be,J as ke}from"./vendor.2ef31834.js";const Ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};Ce();const _e=12,F=a.exports.createContext({toggleColorMode:()=>{}}),Te=({children:e})=>{const[o,n]=a.exports.useState("light"),s=a.exports.useMemo(()=>({toggleColorMode:()=>{n(i=>i==="light"?"dark":"light")}}),[]),r=a.exports.useMemo(()=>J({typography:{fontSize:_e},palette:{mode:o,primary:Q}}),[o]);return t(F.Provider,{value:s,children:t(X,{theme:r,children:e})})},Ae=({children:e})=>t(P.WebsocketProvider,{children:c(Te,{children:[t(K,{}),t(Z,{styles:{ul:{paddingLeft:0,marginTop:0}}}),e]})}),Ee=({onClickMenu:e})=>{const o=b(),n=a.exports.useContext(F),s=()=>{window.location.reload()};return t(m,{sx:{flexGrow:1},children:t(ee,{position:"static",children:c(te,{variant:"dense",children:[t(I,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:e,children:t(oe,{})}),t(m,{sx:{flexGrow:1},children:c(d,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:"inline-block"},children:["Depth Chart",t(d,{sx:{ml:1,fontSize:"12px",lineHeight:"14px",display:"inline-block",[o.breakpoints.down("sm")]:{display:"none"}},children:"bitbank.cc"})]})}),t(I,{sx:{ml:1},onClick:n.toggleColorMode,color:"inherit",children:o.palette.mode==="dark"?t(ne,{}):t(re,{})}),t(se,{color:"inherit",onClick:s,children:"Refresh"})]})})})},N=0,_=1,Pe=["jpy","btc"],De=["btc","xrp","ltc","eth","mona","bcc","xlm","qtum","bat","omg","xym"],k="_",Me=Pe.reduce((e,o)=>{const n=De.map(s=>`${s}${k}${o}`);return[...e,...n]},[]).filter(e=>e.split(k)[0]!==e.split(k)[1]),Se="\xA5",ve="\u20BF",Le={btc:1,xrp:52,ltc:2,eth:1027,mona:213,bcc:1831,xlm:512,qtum:1684,bat:1697,omg:1808,xym:8677},we="https://s2.coinmarketcap.com/static/img/coins/64x64/",Ie=".png";function W(e){return e.split(k).join("/").toUpperCase()}function Re(e){return e.endsWith("jpy")}function T(e){return new R(e).toFormat()}function Oe(e,o=2){return new R(e).toFixed(o)}function H(e){const o=e.split(k)[0],n=Le[o];return`${we}${n}${Ie}`}const Be=200,Fe=50,Ne=1500,S={title:void 0,chart:{animation:!1,height:500},loading:{hideDuration:300,showDuration:300},xAxis:{minPadding:0,maxPadding:0,plotLines:[{color:"#888",value:.1523,width:1,label:{text:"Actual price",rotation:90}}],title:{text:"Price"}},yAxis:[{lineWidth:1,gridLineWidth:1,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"left",x:8}},{opposite:!0,linkedTo:0,lineWidth:1,gridLineWidth:0,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"right",x:-8}}],legend:{enabled:!1},plotOptions:{area:{fillOpacity:.2,lineWidth:1,step:"center"}},tooltip:{headerFormat:'<span style="font-size=10px;">Price: {point.key}</span><br/>',valueDecimals:2},series:[{name:"Bids",type:"area",data:[],color:"#03a7a8"},{name:"Asks",type:"area",data:[],color:"#fc5857"}]},We=e=>Re(e)?Be:Fe,He=({pair:e="btc_jpy"})=>{const o=b(),n=P.useDepth(e,We(e)),s=a.exports.useRef(null),[r,i]=g.useState(!1),u=a.exports.useMemo(()=>n.asks.reduce((l,h)=>{const p={price:+h[N],volume:+h[_],stackedVolume:l.length>0?l[l.length-1].stackedVolume+ +h[_]:0};return[...l,p]},[]),[n.asks]),f=a.exports.useMemo(()=>n.bids.reduce((l,h)=>{const p={price:+h[N],volume:+h[_],stackedVolume:l.length>0?l[l.length-1].stackedVolume+ +h[_]:0};return[...l,p]},[]),[n.bids]);return a.exports.useEffect(()=>{i(!1);const l=setTimeout(()=>i(!0),Ne);return()=>clearTimeout(l)},[e]),a.exports.useEffect(()=>{s.current&&s.current.chart.update({chart:{backgroundColor:o.palette.background.default}})},[o.palette.mode]),a.exports.useEffect(()=>{s.current&&s.current.chart.update({series:[y(x({},S.series[0]),{data:f.map(l=>[+l.price,+l.stackedVolume])}),y(x({},S.series[1]),{data:u.map(l=>[+l.price,+l.stackedVolume])})]})},[e,u,f]),c(m,{sx:{display:"flex",position:"relative"},children:[!r&&t(ie,{sx:{position:"absolute",top:"50%",left:"50%",marginLeft:"-20px"}}),t(ae,{in:r,mountOnEnter:!1,children:t(m,{sx:{width:"100%"},children:t(le,{ref:s,highcharts:ce,options:S})})})]})},j=()=>{const e=b();return t(d,{sx:{mx:1,color:e.palette.divider,display:"inline-block"},children:"/"})},je=o=>{var e=E(o,[]);const n=b();return t(m,y(x({},e),{sx:x({p:4,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",height:120,backgroundColor:n.palette.action.disabledBackground,borderTop:`1px solid ${n.palette.divider}`},e.sx),children:c(m,{sx:{m:"auto",textAlign:"center"},children:[t(D,{href:"https://github.com/daikiojm/bitbank-depth-chart",target:"_blank",children:t(d,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"View Code on GitHub"})}),t(j,{}),t(D,{href:"https://github.com/daikiojm",target:"_blank",children:t(d,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"@daikiojm"})}),t(j,{}),t(D,{href:"http://app.bitbank.cc/",target:"_blank",children:t(d,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"Data Source (bitbank.cc)"})})]})}))},Ue=({onChangePair:e})=>c(g.Fragment,{children:[t(de,{children:Me.map(o=>c(he,{button:!0,onClick:()=>e(o),children:[t(ue,{sx:{minWidth:24},children:t(O,{src:H(o),sx:{width:15,height:15,my:"auto"}})}),t(pe,{primary:W(o)})]},o))}),t(me,{})]}),Ve=n=>{var s=n,{pair:e}=s,o=E(s,["pair"]);const r=b(),i=P.useTicker(e),u=a.exports.useMemo(()=>W(e),[e]),f=a.exports.useMemo(()=>e.split("_")[0].toUpperCase(),[e]),l=a.exports.useMemo(()=>e.split("_")[1].toUpperCase(),[e]),h=a.exports.useMemo(()=>l==="BTC"?ve:Se,[l]),p=a.exports.useMemo(()=>i?(+i.last-+i.open)/+i.open*100:0,[i]),V=a.exports.useMemo(()=>p>=0?xe[500]:ge[800],[p]),$=a.exports.useMemo(()=>H(e),[e]);return t(fe,y(x({variant:"outlined"},o),{sx:x({p:2,display:"flex"},o.sx),children:c(M,{container:!0,spacing:2,children:[t(M,{item:!0,xs:12,sm:6,children:i?c(g.Fragment,{children:[c(m,{sx:{display:"flex"},children:[t(O,{src:$,sx:{width:15,height:15,my:"auto"}}),t(d,{sx:{ml:1,color:r.palette.text.primary,fontWeight:"bold"},children:u})]}),c(d,{sx:{color:r.palette.text.secondary},children:[h,T(i.last)]}),c(d,{sx:{color:r.palette.text.secondary},children:["Low: ",h,T(i.low)]}),c(d,{sx:{color:r.palette.text.secondary},children:["High: ",h,T(i.high)]})]}):t(g.Fragment,{children:[...Array(4)].map((G,A)=>t(B,{variant:"text",width:200},A))})}),t(M,{item:!0,xs:12,sm:6,children:i?c(g.Fragment,{children:[c(d,{sx:{color:r.palette.text.secondary},children:["Base currency: ",f," "]}),c(d,{sx:{color:r.palette.text.secondary},children:["Quote currency: ",l," "]}),c(m,{sx:{display:"flex"},children:[t(d,{sx:{color:r.palette.text.secondary},children:"Change today:"}),c(d,{sx:{ml:1,color:V},children:[p>0&&"+",Oe(p,2),"%"]})]}),c(d,{sx:{color:r.palette.text.secondary},children:["24h volume: ",T(i.vol)]})]}):t(g.Fragment,{children:[...Array(4)].map((G,A)=>t(B,{variant:"text",width:200},A))})})]})}))},U=240;function $e(){const[e,o]=a.exports.useState(!1),[n,s]=a.exports.useState("btc_jpy"),r=a.exports.useCallback(()=>{o(!0)},[o]),i=a.exports.useCallback(()=>{o(!1)},[o]),u=a.exports.useCallback(f=>{s(f),o(!1)},[s]);return c(Ae,{children:[t(Ee,{onClickMenu:r}),t(ye,{sx:{width:U,flexShrink:0,"& .MuiDrawer-paper":{width:U,boxSizing:"border-box"}},variant:"temporary",anchor:"left",onClose:i,open:e,children:t(Ue,{onChangePair:u})}),c(be,{sx:{pt:2,mb:"auto",flex:1},children:[t(Ve,{pair:n,sx:{my:2,mx:1}}),t(He,{pair:n})]}),t(je,{sx:{position:"absolute",bottom:0}})]})}ke.render(t(g.StrictMode,{children:t($e,{})}),document.getElementById("root"));
