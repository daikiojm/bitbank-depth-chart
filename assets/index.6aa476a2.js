var I=Object.defineProperty,j=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&E(e,r,t[r]);if(b)for(var r of b(t))_.call(t,r)&&E(e,r,t[r]);return e},x=(e,t)=>j(e,W(t));var C=(e,t)=>{var r={};for(var i in e)T.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&b)for(var i of b(e))t.indexOf(i)<0&&_.call(e,i)&&(r[i]=e[i]);return r};import{r as l,c as O,j as o,T as N,i as B,d as v,a as c,C as V,G,u as f,B as m,A as z,b as F,I as L,e as $,f as h,g as U,h as q,k as X,R as A,l as J,F as K,H as Q,m as Y,L as D,n as Z,o as ee,p as te,q as oe,D as re,s as ie,t as ne,v as se,w as ae}from"./vendor.59ac4f9b.js";const le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};le();const S=l.exports.createContext({toggleColorMode:()=>{}}),ce=({children:e})=>{const[t,r]=l.exports.useState("light"),i=l.exports.useMemo(()=>({toggleColorMode:()=>{r(s=>s==="light"?"dark":"light")}}),[]),n=l.exports.useMemo(()=>O({typography:{fontSize:12},palette:{mode:t,primary:B}}),[t]);return o(S.Provider,{value:i,children:o(N,{theme:n,children:e})})},de=({children:e})=>o(v.WebsocketProvider,{children:c(ce,{children:[o(V,{}),o(G,{styles:{ul:{paddingLeft:0,marginTop:0}}}),e]})}),he=({onClickMenu:e})=>{const t=f(),r=l.exports.useContext(S),i=()=>{window.location.reload()};return o(m,{sx:{flexGrow:1},children:o(z,{position:"static",children:c(F,{children:[o(L,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:e,children:o($,{})}),c(m,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-start"},children:[o(h,{variant:"h6",component:"div",sx:{fontWeight:"bold",lineHeight:"44px"},children:"Depth Chart"}),c(m,{sx:{ml:2,my:"auto",[t.breakpoints.down("sm")]:{display:"none"}},children:[o(h,{sx:{fontSize:"10px",lineHeight:"10px"},children:"Data Source by"}),o(h,{sx:{fontSize:"14px",lineHeight:"14px"},children:"bitbank.cc"})]})]}),o(L,{sx:{ml:1},onClick:r.toggleColorMode,color:"inherit",children:t.palette.mode==="dark"?o(U,{}):o(q,{})}),o(X,{color:"inherit",onClick:i,children:"Refresh"})]})})})},w=0,k=1,pe=["btc","jpy"],ue=["btc","xrp","ltc","eth","mona","bcc","xlm","qtum","bat","omg","xym"],me=pe.reduce((e,t)=>{const r=ue.map(i=>`${i}_${t}`);return[...e,...r]},[]).filter(e=>e.split("_")[0]!==e.split("_")[1]);function R(e){return e.split("_").join("/").toUpperCase()}function xe(e){return e.endsWith("jpy")}const fe=200,ge=50,be=1500,P={title:void 0,chart:{height:500},loading:{hideDuration:300,showDuration:300},xAxis:{minPadding:0,maxPadding:0,plotLines:[{color:"#888",value:.1523,width:1,label:{text:"Actual price",rotation:90}}],title:{text:"Price"}},yAxis:[{lineWidth:1,gridLineWidth:1,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"left",x:8}},{opposite:!0,linkedTo:0,lineWidth:1,gridLineWidth:0,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"right",x:-8}}],legend:{enabled:!1},plotOptions:{area:{fillOpacity:.2,lineWidth:1,step:"center"}},tooltip:{headerFormat:'<span style="font-size=10px;">Price: {point.key}</span><br/>',valueDecimals:2},series:[{name:"Bids",type:"area",data:[],color:"#03a7a8"},{name:"Asks",type:"area",data:[],color:"#fc5857"}]},ke=e=>xe(e)?fe:ge,ye=({pair:e="btc_jpy"})=>{const t=f(),r=v.useDepth(e,ke(e)),i=l.exports.useRef(null),[n,s]=A.useState(!1),d=l.exports.useMemo(()=>r.asks.reduce((a,p)=>{const y={price:+p[w],volume:+p[k],stackedVolume:a.length>0?a[a.length-1].stackedVolume+ +p[k]:0};return[...a,y]},[]),[r.asks]),g=l.exports.useMemo(()=>r.bids.reduce((a,p)=>{const y={price:+p[w],volume:+p[k],stackedVolume:a.length>0?a[a.length-1].stackedVolume+ +p[k]:0};return[...a,y]},[]),[r.bids]);return l.exports.useEffect(()=>{s(!1);const a=setTimeout(()=>s(!0),be);return()=>clearTimeout(a)},[e]),l.exports.useEffect(()=>{i.current&&i.current.chart.update({chart:{backgroundColor:t.palette.background.default}})},[t.palette.mode]),l.exports.useEffect(()=>{i.current&&i.current.chart.update({series:[x(u({},P.series[0]),{data:g.map(a=>[+a.price,+a.stackedVolume])}),x(u({},P.series[1]),{data:d.map(a=>[+a.price,+a.stackedVolume])})]})},[e,d,g]),c(m,{sx:{display:"flex",position:"relative"},children:[!n&&o(J,{sx:{position:"absolute",top:"50%",left:"50%",marginLeft:"-20px"}}),o(K,{in:n,mountOnEnter:!1,children:o(m,{sx:{width:"100%"},children:o(Q,{ref:i,highcharts:Y,options:P})})})]})},M=()=>{const e=f();return o(h,{sx:{mx:1,color:e.palette.divider,display:"inline-block"},children:"/"})},Ce=t=>{var e=C(t,[]);const r=f();return o(m,x(u({},e),{sx:u({p:4,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",height:120,backgroundColor:r.palette.action.disabledBackground,borderTop:`1px solid ${r.palette.divider}`},e.sx),children:c(m,{sx:{m:"auto",textAlign:"center"},children:[o(D,{href:"https://github.com/daikiojm/bitbank-depth-chart",target:"_blank",children:o(h,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"View Code on GitHub"})}),o(M,{}),o(D,{href:"https://github.com/daikiojm",target:"_blank",children:o(h,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"@daikiojm"})}),o(M,{}),o(D,{href:"http://app.bitbank.cc/",target:"_blank",children:o(h,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"Data Source (bitbank.cc)"})})]})}))},De=({onChangePair:e})=>c(Z,{children:[o(ee,{children:me.map(t=>o(te,{button:!0,onClick:()=>e(t),children:o(oe,{primary:R(t)})},t))}),o(re,{})]}),Pe=r=>{var i=r,{pair:e}=i,t=C(i,["pair"]);const n=f();return o(ie,x(u({variant:"outlined"},t),{sx:u({p:2},t.sx),children:o(h,{sx:{color:n.palette.text.secondary},children:R(e)})}))},H=240;function Te(){const[e,t]=l.exports.useState(!1),[r,i]=l.exports.useState("btc_jpy"),n=l.exports.useCallback(()=>{t(!0)},[t]),s=l.exports.useCallback(()=>{t(!1)},[t]),d=l.exports.useCallback(g=>{i(g),t(!1)},[i]);return c(de,{children:[o(he,{onClickMenu:n}),o(ne,{sx:{width:H,flexShrink:0,"& .MuiDrawer-paper":{width:H,boxSizing:"border-box"}},variant:"temporary",anchor:"left",onClose:s,open:e,children:o(De,{onChangePair:d})}),c(se,{sx:{pt:2,mb:"auto",flex:1},children:[o(Pe,{pair:r,sx:{my:2,mx:1}}),o(ye,{pair:r})]}),o(Ce,{sx:{position:"absolute",bottom:0}})]})}ae.render(o(A.StrictMode,{children:o(Te,{})}),document.getElementById("root"));
