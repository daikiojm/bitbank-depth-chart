var N=Object.defineProperty,B=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var M=(e,o,r)=>o in e?N(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,u=(e,o)=>{for(var r in o||(o={}))L.call(o,r)&&M(e,r,o[r]);if(k)for(var r of k(o))w.call(o,r)&&M(e,r,o[r]);return e},y=(e,o)=>B(e,V(o));var P=(e,o)=>{var r={};for(var i in e)L.call(e,i)&&o.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&k)for(var i of k(e))o.indexOf(i)<0&&w.call(e,i)&&(r[i]=e[i]);return r};import{r as a,c as G,j as t,T as U,i as $,d as T,a as c,C as z,G as q,u as b,B as g,A as Q,b as X,I as R,e as J,f as d,g as K,h as Y,k as Z,R as x,l as ee,F as te,H as oe,m as re,L as D,n as ne,o as ie,p as se,D as ae,t as le,q as ce,s as de,v,S,w as he,x as pe,y as ue}from"./vendor.83281ef6.js";const xe=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};xe();const me=12,I=a.exports.createContext({toggleColorMode:()=>{}}),ge=({children:e})=>{const[o,r]=a.exports.useState("light"),i=a.exports.useMemo(()=>({toggleColorMode:()=>{r(s=>s==="light"?"dark":"light")}}),[]),n=a.exports.useMemo(()=>G({typography:{fontSize:me},palette:{mode:o,primary:$}}),[o]);return t(I.Provider,{value:i,children:t(U,{theme:n,children:e})})},fe=({children:e})=>t(T.WebsocketProvider,{children:c(ge,{children:[t(z,{}),t(q,{styles:{ul:{paddingLeft:0,marginTop:0}}}),e]})}),ye=({onClickMenu:e})=>{const o=b(),r=a.exports.useContext(I),i=()=>{window.location.reload()};return t(g,{sx:{flexGrow:1},children:t(Q,{position:"static",children:c(X,{variant:"dense",children:[t(R,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:e,children:t(J,{})}),t(g,{sx:{flexGrow:1},children:c(d,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:"inline-block"},children:["Depth Chart",t(d,{sx:{ml:1,fontSize:"12px",lineHeight:"14px",display:"inline-block",[o.breakpoints.down("sm")]:{display:"none"}},children:"bitbank.cc"})]})}),t(R,{sx:{ml:1},onClick:r.toggleColorMode,color:"inherit",children:o.palette.mode==="dark"?t(K,{}):t(Y,{})}),t(Z,{color:"inherit",onClick:i,children:"Refresh"})]})})})},O=0,C=1,be=["btc","jpy"],ke=["btc","xrp","ltc","eth","mona","bcc","xlm","qtum","bat","omg","xym"],A="_",Ce=be.reduce((e,o)=>{const r=ke.map(i=>`${i}${A}${o}`);return[...e,...r]},[]).filter(e=>e.split(A)[0]!==e.split(A)[1]);function W(e){return e.split("_").join("/").toUpperCase()}function _e(e){return e.endsWith("jpy")}const Pe=200,Te=50,De=1200,E={title:void 0,chart:{animation:!1,height:500},loading:{hideDuration:300,showDuration:300},xAxis:{minPadding:0,maxPadding:0,plotLines:[{color:"#888",value:.1523,width:1,label:{text:"Actual price",rotation:90}}],title:{text:"Price"}},yAxis:[{lineWidth:1,gridLineWidth:1,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"left",x:8}},{opposite:!0,linkedTo:0,lineWidth:1,gridLineWidth:0,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"right",x:-8}}],legend:{enabled:!1},plotOptions:{area:{fillOpacity:.2,lineWidth:1,step:"center"}},tooltip:{headerFormat:'<span style="font-size=10px;">Price: {point.key}</span><br/>',valueDecimals:2},series:[{name:"Bids",type:"area",data:[],color:"#03a7a8"},{name:"Asks",type:"area",data:[],color:"#fc5857"}]},ve=e=>_e(e)?Pe:Te,Ae=({pair:e="btc_jpy"})=>{const o=b(),r=T.useDepth(e,ve(e)),i=a.exports.useRef(null),[n,s]=x.useState(!1),p=a.exports.useMemo(()=>r.asks.reduce((l,h)=>{const f={price:+h[O],volume:+h[C],stackedVolume:l.length>0?l[l.length-1].stackedVolume+ +h[C]:0};return[...l,f]},[]),[r.asks]),m=a.exports.useMemo(()=>r.bids.reduce((l,h)=>{const f={price:+h[O],volume:+h[C],stackedVolume:l.length>0?l[l.length-1].stackedVolume+ +h[C]:0};return[...l,f]},[]),[r.bids]);return a.exports.useEffect(()=>{s(!1);const l=setTimeout(()=>s(!0),De);return()=>clearTimeout(l)},[e]),a.exports.useEffect(()=>{i.current&&i.current.chart.update({chart:{backgroundColor:o.palette.background.default}})},[o.palette.mode]),a.exports.useEffect(()=>{i.current&&i.current.chart.update({series:[y(u({},E.series[0]),{data:m.map(l=>[+l.price,+l.stackedVolume])}),y(u({},E.series[1]),{data:p.map(l=>[+l.price,+l.stackedVolume])})]})},[e,p,m]),c(g,{sx:{display:"flex",position:"relative"},children:[!n&&t(ee,{sx:{position:"absolute",top:"50%",left:"50%",marginLeft:"-20px"}}),t(te,{in:n,mountOnEnter:!1,children:t(g,{sx:{width:"100%"},children:t(oe,{ref:i,highcharts:re,options:E})})})]})},H=()=>{const e=b();return t(d,{sx:{mx:1,color:e.palette.divider,display:"inline-block"},children:"/"})},Ee=o=>{var e=P(o,[]);const r=b();return t(g,y(u({},e),{sx:u({p:4,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",height:120,backgroundColor:r.palette.action.disabledBackground,borderTop:`1px solid ${r.palette.divider}`},e.sx),children:c(g,{sx:{m:"auto",textAlign:"center"},children:[t(D,{href:"https://github.com/daikiojm/bitbank-depth-chart",target:"_blank",children:t(d,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"View Code on GitHub"})}),t(H,{}),t(D,{href:"https://github.com/daikiojm",target:"_blank",children:t(d,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"@daikiojm"})}),t(H,{}),t(D,{href:"http://app.bitbank.cc/",target:"_blank",children:t(d,{sx:{textAlign:"center",color:r.palette.text.secondary,display:"inline-block"},children:"Data Source (bitbank.cc)"})})]})}))},Le=({onChangePair:e})=>c(x.Fragment,{children:[t(ne,{children:Ce.map(o=>t(ie,{button:!0,onClick:()=>e(o),children:t(se,{primary:W(o)})},o))}),t(ae,{})]}),we=r=>{var i=r,{pair:e}=i,o=P(i,["pair"]);const n=b(),s=T.useTicker(e),p=a.exports.useMemo(()=>W(e),[e]),m=a.exports.useMemo(()=>e.split("_")[0].toUpperCase(),[e]),l=a.exports.useMemo(()=>e.split("_")[1].toUpperCase(),[e]),h=a.exports.useMemo(()=>s?(+s.last-+s.open)/+s.open*100:0,[s]),f=a.exports.useMemo(()=>h>=0?le[500]:ce[800],[h]);return t(de,y(u({variant:"outlined"},o),{sx:u({p:2,display:"flex"},o.sx),children:c(v,{container:!0,spacing:2,children:[t(v,{item:!0,xs:12,sm:6,children:s?c(x.Fragment,{children:[t(d,{sx:{color:n.palette.text.primary,fontWeight:"bold"},children:p}),t(d,{sx:{color:n.palette.text.secondary},children:s.last}),c(d,{sx:{color:n.palette.text.secondary},children:["Low: ",s.low]}),c(d,{sx:{color:n.palette.text.secondary},children:["High: ",s.high]})]}):t(x.Fragment,{children:[...Array(4)].map((F,_)=>t(S,{variant:"text",width:200},_))})}),t(v,{item:!0,xs:12,sm:6,children:s?c(x.Fragment,{children:[c(d,{sx:{color:n.palette.text.secondary},children:["Base currency: ",m," "]}),c(d,{sx:{color:n.palette.text.secondary},children:["Quote currency: ",l," "]}),c(d,{sx:{color:n.palette.text.secondary},children:["Change today:",c(d,{sx:{color:f,display:"inline-block"},children:[h>0&&"+",h.toFixed(2),"%"]})]}),c(d,{sx:{color:n.palette.text.secondary},children:["24h volume: ",s.vol]})]}):t(x.Fragment,{children:[...Array(4)].map((F,_)=>t(S,{variant:"text",width:200},_))})})]})}))},j=240;function Me(){const[e,o]=a.exports.useState(!1),[r,i]=a.exports.useState("btc_jpy"),n=a.exports.useCallback(()=>{o(!0)},[o]),s=a.exports.useCallback(()=>{o(!1)},[o]),p=a.exports.useCallback(m=>{i(m),o(!1)},[i]);return c(fe,{children:[t(ye,{onClickMenu:n}),t(he,{sx:{width:j,flexShrink:0,"& .MuiDrawer-paper":{width:j,boxSizing:"border-box"}},variant:"temporary",anchor:"left",onClose:s,open:e,children:t(Le,{onChangePair:p})}),c(pe,{sx:{pt:2,mb:"auto",flex:1},children:[t(we,{pair:r,sx:{my:2,mx:1}}),t(Ae,{pair:r})]}),t(Ee,{sx:{position:"absolute",bottom:0}})]})}ue.render(t(x.StrictMode,{children:t(Me,{})}),document.getElementById("root"));
