var I=Object.defineProperty,W=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var _=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&_(e,n,t[n]);if(b)for(var n of b(t))P.call(t,n)&&_(e,n,t[n]);return e},m=(e,t)=>W(e,j(t));var C=(e,t)=>{var n={};for(var r in e)E.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&b)for(var r of b(e))t.indexOf(r)<0&&P.call(e,r)&&(n[r]=e[r]);return n};import{c as O,b as H,j as i,d as L,a as d,T as N,C as B,G as V,B as f,A as G,e as M,I as F,f as U,g as p,h as z,u as g,r as l,R as A,i as $,F as q,H as X,k as J,L as D,l as K,m as Q,n as Y,o as Z,D as ee,p as te,q as ie,s as ne,t as re}from"./vendor.e70fcbc6.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};oe();const se=O({typography:{fontSize:12},palette:{primary:H}}),ae=({children:e})=>i(L.WebsocketProvider,{children:d(N,{theme:se,children:[i(B,{}),i(V,{styles:{ul:{paddingLeft:0,marginTop:0}}}),e]})}),le=({onClickMenu:e})=>i(f,{sx:{flexGrow:1},children:i(G,{position:"static",children:d(M,{children:[i(F,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:e,children:i(U,{})}),d(p,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:"bold"},children:["Depth Chart",i(p,{variant:"h6",sx:{ml:1,display:"inline-block"},children:"- bitbank.cc"})]}),i(z,{color:"inherit",onClick:()=>{window.location.reload()},children:"Refresh"})]})})}),v=0,k=1,ce=["btc","jpy"],de=["btc","xrp","ltc","eth","mona","bcc","xlm","qtum","bat","omg","xym"],he=ce.reduce((e,t)=>{const n=de.map(r=>`${r}_${t}`);return[...e,...n]},[]).filter(e=>e.split("_")[0]!==e.split("_")[1]);function R(e){return e.split("_").join("/").toUpperCase()}function ue(e){return e.endsWith("jpy")}const pe=200,me=50,fe=1500,T={title:void 0,chart:{height:500},loading:{hideDuration:300,showDuration:300},xAxis:{minPadding:0,maxPadding:0,plotLines:[{color:"#888",value:.1523,width:1,label:{text:"Actual price",rotation:90}}],title:{text:"Price"}},yAxis:[{lineWidth:1,gridLineWidth:1,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"left",x:8}},{opposite:!0,linkedTo:0,lineWidth:1,gridLineWidth:0,title:void 0,tickWidth:1,tickLength:5,tickPosition:"inside",labels:{align:"right",x:-8}}],legend:{enabled:!1},plotOptions:{area:{fillOpacity:.2,lineWidth:1,step:"center"}},tooltip:{headerFormat:'<span style="font-size=10px;">Price: {point.key}</span><br/>',valueDecimals:2},series:[{name:"Bids",type:"area",data:[],color:"#03a7a8"},{name:"Asks",type:"area",data:[],color:"#fc5857"}]},xe=e=>ue(e)?pe:me,be=({pair:e="btc_jpy"})=>{const t=g(),n=L.useDepth(e,xe(e)),r=l.exports.useRef(null),[o,a]=A.useState(!1),c=l.exports.useMemo(()=>n.asks.reduce((s,h)=>{const y={price:+h[v],volume:+h[k],stackedVolume:s.length>0?s[s.length-1].stackedVolume+ +h[k]:0};return[...s,y]},[]),[n.asks]),x=l.exports.useMemo(()=>n.bids.reduce((s,h)=>{const y={price:+h[v],volume:+h[k],stackedVolume:s.length>0?s[s.length-1].stackedVolume+ +h[k]:0};return[...s,y]},[]),[n.bids]);return l.exports.useEffect(()=>{a(!1);const s=setTimeout(()=>a(!0),fe);return()=>clearTimeout(s)},[e]),l.exports.useEffect(()=>{r.current&&r.current.chart.update({chart:{backgroundColor:t.palette.background.default}})},[t.palette.mode]),l.exports.useEffect(()=>{r.current&&r.current.chart.update({series:[m(u({},T.series[0]),{data:x.map(s=>[+s.price,+s.stackedVolume])}),m(u({},T.series[1]),{data:c.map(s=>[+s.price,+s.stackedVolume])})]})},[e,c,x]),d(f,{sx:{display:"flex",position:"relative"},children:[!o&&i($,{sx:{position:"absolute",top:"50%",left:"50%",marginLeft:"-20px"}}),i(q,{in:o,mountOnEnter:!1,children:i(f,{sx:{width:"100%"},children:i(X,{ref:r,highcharts:J,options:T})})})]})},w=()=>{const e=g();return i(p,{sx:{mx:1,color:e.palette.divider,display:"inline-block"},children:"/"})},ge=t=>{var e=C(t,[]);const n=g();return i(f,m(u({},e),{sx:u({p:4,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",height:120,backgroundColor:n.palette.action.disabledBackground,borderTop:`1px solid ${n.palette.divider}`},e.sx),children:d(f,{sx:{m:"auto",textAlign:"center"},children:[i(D,{href:"https://github.com/daikiojm/bitbank-depth-chart",target:"_blank",children:i(p,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"View Code on GitHub"})}),i(w,{}),i(D,{href:"https://github.com/daikiojm",target:"_blank",children:i(p,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"@daikiojm"})}),i(w,{}),i(D,{href:"http://app.bitbank.cc/",target:"_blank",children:i(p,{sx:{textAlign:"center",color:n.palette.text.secondary,display:"inline-block"},children:"Data Source (bitbank.cc)"})})]})}))},ke=({onChangePair:e})=>d(K,{children:[i(Q,{children:he.map(t=>i(Y,{button:!0,onClick:()=>e(t),children:i(Z,{primary:R(t)})},t))}),i(ee,{})]}),ye=n=>{var r=n,{pair:e}=r,t=C(r,["pair"]);const o=g();return i(te,m(u({variant:"outlined"},t),{sx:u({p:2},t.sx),children:i(p,{sx:{color:o.palette.text.secondary},children:R(e)})}))},S=240;function Ce(){const[e,t]=l.exports.useState(!1),[n,r]=l.exports.useState("btc_jpy"),o=l.exports.useCallback(()=>{t(!0)},[t]),a=l.exports.useCallback(()=>{t(!1)},[t]),c=l.exports.useCallback(x=>{r(x),t(!1)},[r]);return d(ae,{children:[i(le,{onClickMenu:o}),i(ie,{sx:{width:S,flexShrink:0,"& .MuiDrawer-paper":{width:S,boxSizing:"border-box"}},variant:"temporary",anchor:"left",onClose:a,open:e,children:i(ke,{onChangePair:c})}),d(ne,{sx:{pt:2,mb:"auto",flex:1},children:[i(ye,{pair:n,sx:{my:2,mx:1}}),i(be,{pair:n})]}),i(ge,{sx:{position:"absolute",bottom:0}})]})}re.render(i(A.StrictMode,{children:i(Ce,{})}),document.getElementById("root"));
